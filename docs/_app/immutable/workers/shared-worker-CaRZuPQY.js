var he=Object.defineProperty;var de=(u,d,w)=>d in u?he(u,d,{enumerable:!0,configurable:!0,writable:!0,value:w}):u[d]=w;var J=(u,d,w)=>de(u,typeof d!="symbol"?d+"":d,w);(function(){"use strict";const u="oklch(27.4% 0.006 286.033)",d="oklch(92.9% 0.013 255.508)",w="oklch(57.7% 0.245 27.325)",U="oklch(70.4% 0.191 22.216)",N={cyan:"oklch(71.5% 0.143 215.221)",lime:"oklch(84.1% 0.238 128.85)",amber:"oklch(82.8% 0.189 84.429)",fuchsia:"oklch(59.1% 0.293 322.896)",teal:"oklch(60% 0.118 184.704)",green:"oklch(62.7% 0.194 149.214)",sky:"oklch(74.6% 0.16 232.661)",indigo:"oklch(51.1% 0.262 276.966)",violet:"oklch(54.1% 0.281 293.009)",pink:"oklch(59.2% 0.249 0.584)",blue:"oklch(62.3% 0.214 259.815)",orange:"oklch(75% 0.183 55.934)",emerald:"oklch(59.6% 0.145 163.225)"};function K(n,e){return{log(...a){console.log(`%c[${e}]%c`,`background: ${u}; color: ${N[n]}; font-weight: bold; line-height: 1rem;`,`background: ${u}; color: ${d}; line-height: 1rem`,...a)},error(...a){console.error(`%c[${e}]%c`,`background: ${u}; color: ${w}; font-weight: bold; line-height: 1rem;`,`background: ${u}; color: ${U}; line-height: 1rem`,...a)}}}const b=[["Ada","Lovelace"],["Grace","Hopper"],["Katherine","Johnson"],["Margaret","Hamilton"],["Jean","Sammet"],["Frances","Allen"],["Karen","Spärck Jones"],["Mary","Keller"],["Annie","Easley"],["Marian","Croak"],["Barbara","Liskov"],["Radia","Perlman"],["Adele","Goldberg"],["Sophie","Wilson"],["Fran","Allen"],["Elizabeth","Feinler"],["Carol","Shaw"],["Anita","Borg"],["Betty","Holberton"],["Lynn","Conway"],["Dana","Scully"],["Ellen","Ripley"],["Sarah","Connor"],["Nyota","Uhura"],["Leia","Organa"],["Rey","Skywalker"],["Samantha","Carter"],["Trinity","Anderson"],["Susan","Calvin"],["Delenn","Mir"],["Olivia","Dunham"],["Beverly","Crusher"],["Kara","Thrace"],["Zoë","Washburne"],["River","Tam"],["Leela","Turanga"],["Jessica","Fletcher"],["Dana","Barrett"],["Padme","Amidala"],["Rose","Tico"],["Willow","Rosenberg"],["Eowyn","Rohan"],["Arwen","Undómiel"],["Imperator","Furiosa"],["Katniss","Everdeen"],["Hermione","Granger"],["Kathryn","Janeway"],["Motoko","Kusanagi"],["Leeloo","Dallas"],["Alice","Liddell"],["Dorothy","Gale"],["Frodo","Baggins"],["Gandalf","Grey"],["Aragorn","Elessar"],["Legolas","Greenleaf"],["Galadriel","Artanis"],["Bilbo","Baggins"],["Merlin","Ambrosius"],["Arthur","Pendragon"],["Guinevere","Pendragon"],["Harry","Potter"],["Luna","Lovegood"],["Albus","Dumbledore"],["Severus","Snape"],["Luke","Skywalker"],["Han","Solo"],["Darth","Vader"],["Obi-Wan","Kenobi"],["Qui-Gon","Jinn"],["Jean-Luc","Picard"],["James","Kirk"],["Spock","S'chn T'gai"],["Leonard","McCoy"],["Montgomery","Scott"],["Marty","McFly"],["Emmett","Brown"],["Indiana","Jones"],["Ellen","Ripley"],["Thomas","Anderson"],["Morpheus","Morpheus"],["Lyra","Belacqua"],["Ender","Wiggin"],["Valentine","Wiggin"],["Peter","Wiggin"],["Paul","Atreides"],["Liet","Kynes"],["Duncan","Idaho"],["Muad'Dib","Atreides"],["Conan","Cimmerian"],["Arya","Stark"],["Jon","Snow"],["Daenerys","Targaryen"],["Tyrion","Lannister"],["Éowyn","Dernhelm"],["Aragorn","Elessar"],["Lucy","Pevensie"],["Aslan","Aslan"],["Susan","Pevensie"],["Edmund","Pevensie"],["Alan","Turing"],["John","von Neumann"],["Claude","Shannon"],["Donald","Knuth"],["Tim","Berners-Lee"],["Vint","Cerf"],["Robert","Kahn"],["Marvin","Minsky"],["John","McCarthy"],["Edsger","Dijkstra"],["Charles","Babbage"],["Hedy","Lamarr"],["Evelyn","Boyd Granville"],["Shafi","Goldwasser"],["Edith","Clarke"],["Clarence","Ellis"],["Melba","Roy Mouton"],["Dorothy","Vaughan"],["Mary","Jackson"],["Joy","Buolamwini"],["Timnit","Gebru"],["Fei","Li"],["Yoshua","Bengio"],["Geoffrey","Hinton"],["Yann","LeCun"],["Judea","Pearl"],["Leslie","Lamport"],["Barbara","Grosz"],["Raj","Reddy"],["Rediet","Abebe"],["Katie","Bouman"],["Latanya","Sweeney"],["Megan","Smith"],["Safiya","Noble"],["Ruha","Benjamin"],["Wendy","Hall"],["Valerie","Taylor"],["Radhika","Nagpal"],["Justine","Cassell"],["Daphne","Koller"],["Rosalind","Picard"],["Cynthia","Breazeal"],["Daniela","Rus"],["Richard","Stallman"],["Linus","Torvalds"],["Dennis","Ritchie"],["Ken","Thompson"],["Brian","Kernighan"],["Mark","Dean"],["Guido","van Rossum"],["Louis","Armstrong"],["Duke","Ellington"],["Charlie","Parker"],["Miles","Davis"],["John","Coltrane"],["Ella","Fitzgerald"],["Billie","Holiday"],["Ray","Charles"],["Aretha","Franklin"],["James","Brown"],["Elvis","Presley"],["Chuck","Berry"],["Little","Richard"],["Buddy","Holly"],["Bob","Dylan"],["Jimi","Hendrix"],["John","Lennon"],["Paul","McCartney"],["George","Harrison"],["David","Bowie"],["Freddie","Mercury"],["Mick","Jagger"],["Keith","Richards"],["Jimmy","Page"],["Stevie","Wonder"],["Michael","Jackson"],["Prince","Nelson"],["Madonna","Ciccone"],["Whitney","Houston"],["Tina","Turner"],["Joni","Mitchell"],["Nina","Simone"],["Marvin","Gaye"],["Quincy","Jones"],["Frank","Sinatra"],["Leonard","Bernstein"],["Igor","Stravinsky"],["Philip","Glass"],["Bob","Marley"],["Kurt","Cobain"],["Tupac","Shakur"],["Notorious","B.I.G."],["Dr.","Dre"],["Björk","Guðmundsdóttir"],["Fela","Kuti"],["Carlos","Santana"],["Johnny","Cash"],["Dolly","Parton"],["Willie","Nelson"],["Muddy","Waters"]];var M="0123456789abcdefghijklmnopqrstuv",y=20,S=12,c=255,W=65535,o=new Uint8Array(Array.from(M).map(n=>n.charCodeAt(0))),B=(()=>{const n=new Uint8Array(123).fill(255);for(let e=0;e<M.length;e++)n[M.charCodeAt(e)]=e;return n})(),F=new Array(y);function P(n){const e=F,a=n[0],r=n[1],t=n[2],s=n[3],i=n[4],k=n[5],f=n[6],l=n[7],A=n[8],I=n[9],C=n[10],D=n[11];return e[19]=o[D<<4&31],e[18]=o[D>>1&31],e[17]=o[(D>>6|C<<2)&31],e[16]=o[C>>3&31],e[15]=o[I&31],e[14]=o[(I>>5|A<<3)&31],e[13]=o[A>>2&31],e[12]=o[(A>>7|l<<1)&31],e[11]=o[(l>>4|f<<4)&31],e[10]=o[f>>1&31],e[9]=o[(f>>6|k<<2)&31],e[8]=o[k>>3&31],e[7]=o[i&31],e[6]=o[(i>>5|s<<3)&31],e[5]=o[s>>2&31],e[4]=o[(s>>7|t<<1)&31],e[3]=o[(t>>4|r<<4)&31],e[2]=o[r>>1&31],e[1]=o[(r>>6|a<<2)&31],e[0]=o[a>>3&31],String.fromCharCode.apply(null,e)}function x(n){if(!n||n.length!==y)throw new Error(`Invalid XID length: expected ${y}, got ${(n==null?void 0:n.length)||0}`);const e=new Uint8Array(S),a=new Uint8Array(y);for(let r=0;r<y;r++)a[r]=n.charCodeAt(r);try{const r=new Uint8Array(y);for(let t=0;t<y;t++){const s=a[t],i=B[s];if(i===255)throw new Error(`Invalid character '${n[t]}' at position ${t}`);r[t]=i}if(e[0]=r[0]<<3|r[1]>>2,e[1]=r[1]<<6|r[2]<<1|r[3]>>4,e[2]=r[3]<<4|r[4]>>1,e[3]=r[4]<<7|r[5]<<2|r[6]>>3,e[4]=r[6]<<5|r[7],e[5]=r[8]<<3|r[9]>>2,e[6]=r[9]<<6|r[10]<<1|r[11]>>4,e[7]=r[11]<<4|r[12]>>1,e[8]=r[12]<<7|r[13]<<2|r[14]>>3,e[9]=r[14]<<5|r[15],e[10]=r[16]<<3|r[17]>>2,e[11]=r[17]<<6|r[18]<<1|r[19]>>4,M[e[11]<<4&31]!==n[19])throw new Error("XID consistency check failed");return e}catch(r){if(r instanceof Error&&r.message.includes("Invalid character"))throw r;if(r instanceof Error&&r.message.includes("out of range"))for(let t=0;t<y;t++){const s=a[t];if(s>=B.length||B[s]===255)throw new Error(`Invalid character '${n[t]}' (code ${s}) at position ${t}`)}throw new Error(`XID decoding error: ${r instanceof Error?r.message:String(r)}`)}}var O=class E{constructor(e){this.bytes=e}static fromBytes(e){if(!(e instanceof Uint8Array))throw new Error("ID is not a Uint8Array");if(e.length!==S)throw new Error("Invalid id length");return new E(e)}static fromString(e){if(e.length!==y)throw new Error("Invalid id length");if(!/[0-9a-v]{20}/.test(e))throw new Error("Invalid string id (must be 20 chars, 0-9 a-v");return new E(x(e))}static nilID(){return new E(new Uint8Array(S))}get time(){const e=this.bytes,a=e[0]<<24|e[1]<<16|e[2]<<8|e[3];return new Date(a*1e3)}get machineId(){return this.bytes.slice(4,7)}get processId(){const e=this.bytes;return e[7]<<8|e[8]}get counter(){const e=this.bytes;return e[9]<<16|e[10]<<8|e[11]}toString(){return P(this.bytes)}isNil(){return this.bytes.every(e=>e===0)}equals(e){return this===e?!0:this.bytes.every((a,r)=>a===e.bytes[r])}};function X(n){let e;globalThis.SharedArrayBuffer?e=new SharedArrayBuffer(4):globalThis.WebAssembly?e=new WebAssembly.Memory({initial:1,maximum:1,shared:!0}).buffer:e=new ArrayBuffer(4);const a=new Uint32Array(e);return a[0]=n,{getNext(){const r=Atomics.add(a,0,1);return r===0&&(a[0]=n&65535),r&16777215}}}async function _(n,e={}){const a=await n.get("RandomBytes",e.randomBytes||null),r=await n.get("HashFunction"),s=await(await n.get("MachineId",e.machineId?async()=>e.machineId:null))(),i=(await r(s)).subarray(0,3),f=await(await n.get("ProcessId",e.processId?async()=>e.processId:null))()&65535,l=new Uint8Array(S);l[4]=i[0]&c,l[5]=i[1]&c,l[6]=i[2]&c,l[7]=f>>8&c,l[8]=f&c;const A=a(3),I=a(3),C=a(3),D=A[0]<<16|I[1]<<8|C[2],ue=X(D);function H(g){const h=new Uint8Array(l);g=Math.floor(g/1e3),h[0]=g>>24&c,h[1]=g>>16&c,h[2]=g>>8&c,h[3]=g&c;const T=ue.getNext();return h[9]=T>>16&c,h[10]=T>>8&c,h[11]=T&c,h}return{machineId:s,processId:f,newId(g){const h=g instanceof Date?+g:Date.now();return O.fromBytes(H(h))},fastId(){return P(H(Date.now()))}}}var j={async test(n){if(typeof n!="function")return!1;try{const e=await n("custom-hash-test");return e instanceof Uint8Array&&e.length===32}catch{return!1}},async fallback(n){console.warn("Using non-secure fallback (hash)");const e=typeof n=="string"?n:n.toString();let a=2166136261;for(let t=0;t<e.length;t++)a^=e.charCodeAt(t),a=a*16777619>>>0;const r=new Uint8Array(32);for(let t=0;t<32;t++)r[t]=(a^t*83)+t&255;return r}},V={async test(n){if(typeof n!="function")return!1;try{const e=await n();return!!e&&typeof e=="string"&&e.length>0}catch{return!1}},async fallback(){console.warn("Using non-secure fallback (machine id)");const n=Date.now().toString(36),e=()=>Math.random().toString(36).substring(2,10);return`${e()}-${n}-${e()}`}},z={async test(n){if(typeof n!="function")return!1;try{const e=await n();return typeof e=="number"&&e>0}catch{return!1}},async fallback(){return console.warn("Using non-secure fallback (process id)"),Math.floor(Math.random()*65535)+1}},Y={async test(n){if(typeof n!="function")return!1;try{const e=n(5);return e instanceof Uint8Array&&e.length===5}catch{return!1}},fallback(n){console.warn("Using non-secure fallback (randomBytes)");const e=new Uint8Array(n);for(let a=0;a<n;a++)e[a]=Math.floor(Math.random()*256);return e}},q={RandomBytes:Y,HashFunction:j,MachineId:V,ProcessId:z},Q=class{constructor(n){J(this,"cache",new Map);this.adapter=n}async get(n,e){const a=q[n];if(e&&await a.test(e))return this.cache.set(n,e),e;if(this.cache.has(n))return this.cache.get(n);const r=this.adapter[n];return await a.test(r)?(this.cache.set(n,r),r):a.fallback}},Z=async n=>{typeof n=="string"&&(n=new TextEncoder().encode(n));const e=await globalThis.crypto.subtle.digest("SHA-256",n);return new Uint8Array(e)};async function ee(){const n=[],e=(Math.random()*65535|0).toString(16).padStart(2,"0"),a=Date.now().toString(36);return n.push(`salt: ${e}:${a}`),n.push(`env:${ne()}`),v(navigator)&&(n.push(`ua:${navigator.userAgent||""}`),n.push(`lang:${navigator.language||""}`),navigator.languages&&Array.isArray(navigator.languages)&&n.push(`langs:${navigator.languages.join(",")}`),"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency&&n.push(`cores:${navigator.hardwareConcurrency}`),"deviceMemory"in navigator&&navigator.deviceMemory&&n.push(`mem:${navigator.deviceMemory}`)),v(screen)&&(n.push(`colorDepth:${screen.colorDepth}`),n.push(`width:${screen.width}`),n.push(`height:${screen.height}`),screen.availWidth&&n.push(`availWidth:${screen.availWidth}`),screen.availHeight&&n.push(`availHeight:${screen.availHeight}`)),n.push(`tz:${new Date().getTimezoneOffset()}`),n.filter(Boolean).join("||")}function ne(){return v(window)&&v(document)?"browser":v(self)&&typeof importScripts=="function"?R(self,ServiceWorkerGlobalScope)?"service-worker":R(self,DedicatedWorkerGlobalScope)?"dedicated-worker":R(self,SharedWorkerGlobalScope)?"shared-worker":"web-worker":"unknown"}function v(n){return typeof n<"u"}function R(n,e){return typeof e<"u"&&n instanceof e}var re=async()=>Math.floor(Math.random()*(W-255+1))+255,ae=n=>{const e=new Uint8Array(n);return globalThis.crypto.getRandomValues(e)},te=new Q({RandomBytes:ae,HashFunction:Z,MachineId:ee,ProcessId:re});async function oe(n){return _(te,n)}var se={init:oe};const m=new Map;let p,$;const L=K("fuchsia","shared-worker");function ie(){let n=b.length*b.length;for(;n-- >0;){const e=b.length*Math.random()|0,a=[b[e][0],b[e][1]].join("-").toLowerCase().replaceAll(/[[:punct:]\s]/g,"");if(!m.has(a))return a}return Math.random().toString(16).substring(3,9)}self.onconnect=async n=>{$??($=await se.init());const e=ie();L.log(`New client connected: ${e}`),p=n.ports[0],p.onmessage=ce(e,p),p.start(),m.set(e,p)},self.onerror=n=>{L.error("Error:",n)};const ce=(n,e)=>{const a=le(e);let r="//Empty";return async t=>{L.log("Message received:",t.data);const s=t.data;if(typeof s.type!="string")throw new Error("Invalid message:",s);switch(s.type){case"register":r=s.payload.tabID,a("ready",{clientId:n}),G("client-added",{clientId:n,tabID:r,clients:m.keys().toArray()});return;case"unregister":e.close(),m.delete(n),G("client-removed",{clientId:n,tabID:r,clients:m.keys().toArray()});return;case"new-xid":{const i=$.fastId();a("result:xid",{xid:i}),G("result:xid",{origin:n,xid:i})}return;case"new-batch":{const i=performance.now(),k=new Array(s.payload.size).map($.fastId),l=performance.now()-i;a("result:batch",{xids:k,time:l})}return;default:console.warn(`Unsupported message type: ${s}`)}}};function le(n){return function(a,r){n.postMessage({dest:"client",type:a,payload:r})}}function G(n,e){for(const a of m.values())a.postMessage({dest:"broadcast",type:n,payload:e})}})();
